<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Player</title>
    <link rel="stylesheet" href="/css/wars.css">
    <link rel="stylesheet" href="/css/register.css">
</head>

<body>

<div class="register-container">
    <input type="text" id="player-name" placeholder="Enter Your Name">
    <button class="button" id="submit-registration">Register</button>
</div>

<script>
    document.getElementById("submit-registration").addEventListener("click", async function() {
    let playerName = document.getElementById("player-name").value.trim();

    if (playerName === "") {
        alert("Please enter a valid name.");
        return;
    }

    // Prepare the request payload
    const requestData = { name: playerName };

    try {
        // Send the POST request to the /register endpoint
        let response = await fetch("/register", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(requestData)
        });

        // Check if the registration was successful
        if (response.ok) {
            const result = await response.json();
            alert("Player " + playerName + " has been registered!");
            window.close(); // Close the popup after successful registration
        } else {
            const errorData = await response.json();
            alert("Error: " + (errorData.message || "Registration failed. Please try again."));
        }
    } catch (error) {
        console.error("Error registering player:", error);
        alert("An error occurred while registering. Please try again.");
    }
});
</script>

</body>

</html>
